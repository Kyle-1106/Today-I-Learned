# コレクションの実装

コレクションを実装するときの注意点。

## 自前でコレクションを実装しない

javaであればStreamAPIを使用すればわざわざ複雑な処理を実装しなくて済むので言語ごとにすでに搭載されているAPIは使用する。

## ループ内のネストを減らす

ループ内でネスト構造があると可読性が下がるので以下の方法を使用してループ内のネストを減らす。

### 早期continue

```java
public class UserValidator {
    public void validateUsers(List<User> users) {
        for (User user : users) {
            // 無効なユーザーは早期にスキップ
            if (!isValidAge(user)) continue;
            if (!isValidEmail(user)) continue;
            if (!isValidUsername(user)) continue;

            // 全ての検証をパスしたユーザーの処理
            processValidUser(user);
        }
    }

    private boolean isValidAge(User user) {
        return user.getAge() >= 18;
    }

    private boolean isValidEmail(User user) {
        return user.getEmail().contains("@");
    }

    private boolean isValidUsername(User user) {
        return user.getUsername().length() >= 3;
    }

    private void processValidUser(User user) {
        System.out.println("処理中のユーザー: " + user.getUsername());
        // ユーザー処理ロジック
    }
```

ifの早期リターンと同様に、条件に一致しなかった場合にはcontinueでループを抜けることで可読性が上がる。breakも同様である。
### ファーストコレクションを使用して低凝集なコレクションを改善する

ファーストコレクションとは、よく出てくるようなコレクションの処理をクラスにまとめていろんなところに同じ処理が何回も描かれることを防ぐ手法である。これは以下の記事にも記載されているがリファクタ期などでやるべきで最初は同じような処理がたくさん出てくるかわからないので、ここまでしなくていいかなと思う。自社サービスなどでは運用していくのでこの観点は必要かもしれないがSIerでは実際に運用するということはそこまでないので実務でここまですることはないと思う。

[ファーストクラスコレクションの実装と、その使い方](https://zenn.dev/tesnshin_o255/articles/a9af0a9a2e5596)
